<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Money Tracker</title>

<style>
* { box-sizing: border-box; }

:root {
  --bg:#f2f2f2; --card:#fff; --text:#222; --muted:#777;
  --green:#2ecc71; --red:#e74c3c; --tab:#e5e5e5; --tab-active:#222;
}
body.dark {
  --bg:#121212; --card:#1e1e1e; --text:#f1f1f1; --muted:#aaa;
  --tab:#2a2a2a; --tab-active:#f1f1f1;
}
body {
  margin:0; font-family:system-ui,sans-serif;
  background:var(--bg); color:var(--text);
}
.container {
  max-width:640px; margin:auto; padding:20px;
}
.header {
  display:flex; justify-content:space-between; align-items:center;
}
.title { font-size:22px; font-weight:700; }
.toggle { cursor:pointer; font-size:18px; }

.tabs {
  display:flex; background:var(--tab); border-radius:14px;
  overflow:hidden; margin-top:14px;
}
.tab {
  flex:1; padding:14px; border:none; background:none;
  font-size:16px; font-weight:600; cursor:pointer;
}
.tab.active { background:var(--tab-active); color:white; }

.card {
  background:var(--card); border-radius:18px;
  padding:24px; margin-top:18px;
  box-shadow:0 10px 24px rgba(0,0,0,.08);
}
.form { display:none; }
.form.active { display:block; }

.field { margin-bottom:18px; position:relative; }
.field label {
  position:absolute; top:-8px; left:12px;
  background:var(--card); padding:0 6px;
  font-size:13px; color:var(--muted);
}
.field input, .field select {
  width:100%; padding:12px; border-radius:12px;
  border:1px solid #ccc; font-size:16px;
  background:transparent; color:var(--text);
}

button.save {
  width:100%; padding:14px; border-radius:14px;
  border:none; font-size:16px; font-weight:700;
  color:white; cursor:pointer;
}
.income { background:var(--green); }
.expense { background:var(--red); }

.maintenance {
  text-align:center; color:var(--muted); padding:40px 10px;
}

#statusMsg {
  margin-top:10px;
  font-weight:600;
}
</style>
</head>

<body>

<div class="container">

  <div class="header">
    <div class="title">üí∞ Money Tracker</div>
    <div class="toggle" onclick="toggleDark()">üåô</div>
  </div>

  <div class="tabs">
    <button class="tab active" onclick="showTab('income',this)">Income</button>
    <button class="tab" onclick="showTab('expense',this)">Expense</button>
    <button class="tab" onclick="showTab('saving',this)">Saving</button>
  </div>

  <!-- INCOME -->
  <div id="income" class="card form active">
    <div class="field">
      <label>Date</label>
      <input type="date" id="iDate">
    </div>
    <div class="field">
      <label>Income name</label>
      <input id="iName">
    </div>
    <div class="field">
      <label>Amount</label>
      <input type="number" step="0.01" id="iAmount">
    </div>
    <div class="field">
      <label>Group</label>
      <select id="iGroup">
        <option>‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
        <option>Roblox</option>
        <option>‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</option>
      </select>
    </div>
    <button class="save income" onclick="submitIncome()">Save Income</button>
  </div>

  <!-- EXPENSE -->
  <div id="expense" class="card form">
    <div class="field">
      <label>Date</label>
      <input type="date" id="eDate">
    </div>
    <div class="field">
      <label>Expense name</label>
      <input id="eName">
    </div>
    <div class="field">
      <label>Amount</label>
      <input type="number" step="0.01" id="eAmount">
    </div>
    <div class="field">
      <label>Group</label>
      <select id="eGroup">
        <option>‡∏Ñ‡πà‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option>
        <option>‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á</option>
        <option>‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á</option>
        <option>‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô</option>
        <option>‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô</option>
        <option>Roblox</option>
        <option>‡∏¢‡∏∑‡∏°‡πÄ‡∏á‡∏¥‡∏ô</option>
        <option>‡πÇ‡∏î‡∏ô‡πÇ‡∏Å‡∏á</option>
      </select>
    </div>
    <button class="save expense" onclick="submitExpense()">Save Expense</button>
  </div>

  <!-- SAVING -->
  <div id="saving" class="card form">
    <div class="maintenance">
      <h2>üöß Saving</h2>
      <p>Under maintenance</p>
    </div>
  </div>

  <div id="statusMsg"></div>
</div>

<!-- hidden iframe -->
<iframe name="hiddenFrame" style="display:none;"></iframe>

<script>
const URL = "https://script.google.com/macros/s/AKfycbz52G5E2apNeXPWlI6COIoCfteQB7SfvPd6x6_w123m/exec";

/* today (local, Thailand-safe) */
function setToday() {
  const d = new Date();
  const y = d.getFullYear();
  const m = String(d.getMonth()+1).padStart(2,"0");
  const day = String(d.getDate()).padStart(2,"0");
  const today = `${y}-${m}-${day}`;
  iDate.value = today;
  eDate.value = today;
}
window.onload = setToday;

/* tabs */
function showTab(id, btn) {
  document.querySelectorAll(".form").forEach(f=>f.classList.remove("active"));
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  btn.classList.add("active");
}

/* dark */
function toggleDark() {
  document.body.classList.toggle("dark");
}

/* submit via iframe */
function postData(data) {
  showStatus("Saving...");

  fetch(URL, {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(data)
  })
  .then(res => res.json())
  .then(res => {
    if (res.success) {
      showStatus("‚úÖ Saved", "green");
      setToday();
    } else {
      showStatus("‚ùå Failed", "red");
    }
  })
  .catch(() => {
    showStatus("‚ùå Network error", "red");
  });
}


/* listen result */
const iframe = document.querySelector("iframe[name='hiddenFrame']");
iframe.onload = () => {
  try {
    const txt = iframe.contentDocument.body.innerText.trim();
    if (txt === "SUCCESS") {
      showStatus("‚úÖ Saved", "green");
      setToday();
    } else {
      showStatus("‚ùå Failed", "red");
    }
  } catch {
    showStatus("‚ùå Failed", "red");
  }
};

function showStatus(msg, color="#333") {
  const el = document.getElementById("statusMsg");
  el.innerText = msg;
  el.style.color = color;
}

function submitIncome() {
  postData({
    type:"income",
    date:iDate.value,
    name:iName.value,
    amount:iAmount.value,
    group:iGroup.value
  });
}

function submitExpense() {
  postData({
    type:"expense",
    date:eDate.value,
    name:eName.value,
    amount:eAmount.value,
    group:eGroup.value
  });
}
</script>

</body>
</html>



